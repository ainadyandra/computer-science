<!DOCTYPE html>
<html>
<head>
  <title>Computer Science Revision</title>
  <meta charset="UTF-8">
</head>
<body>
  <h1>Computer Science Revision</h1>
  <hr>
  <h2>Binary to Denary</h2>
  <p>Computers only understand 0 (off) and 1 (on).</p>
  <p>Binary is how all data is stored: text, images, sound, programs.</p>
  <p>1 byte = 8 bits</p>
  <div id="binary-game">
    <p><strong>Convert this binary number to denary:</strong></p>
    <p id="binary-number" style="font-size: 1.5em; font-weight: bold;">
      <!-- binary numbers here -->
    </p>
    <input type="number" id="user-answer" placeholder="Enter denary value">
    <button onclick="checkAnswer()">Submit</button>
    <button onclick="generateBinary()">Next</button>
    <p id="feedback"></p>
    <p>Score:<span id="score">0</span></p>
  </div>
  <hr>
  
<script>
document.addEventListener('DOMContentLoaded', () => {
  const binaryEl = document.getElementById('binary-number');
  const feedbackEl = document.getElementById('feedback');
  const userInput = document.getElementById('user-answer');
  const scoreEl = document.getElementById('score');

  if (!binaryEl) {
    console.error('Missing element: #binary-number. Make sure your HTML has <p id="binary-number"></p>');
    if (feedbackEl) feedbackEl.textContent = 'Error: game not set up correctly (see console).';
    return;
  }

  let score = 0;
  let currentBinary = '';

  // generate a random binary string of length 4..8
  function generateBinary() {
    const length = Math.floor(Math.random() * 5) + 4; // 4..8
    let bin = '';
    for (let i = 0; i < length; i++) {
      bin += Math.random() < 0.5 ? '0' : '1';
    }
    currentBinary = bin;
    binaryEl.textContent = currentBinary;
    if (feedbackEl) feedbackEl.textContent = '';
    if (userInput) userInput.value = '';
    console.log('New binary generated:', currentBinary);
  }

  function checkAnswer() {
    if (currentBinary === '') {
      if (feedbackEl) feedbackEl.textContent = 'No binary number available — click "New Number".';
      console.warn('checkAnswer called but no currentBinary present.');
      return;
    }
    const userValRaw = userInput ? userInput.value : '';
    const userVal = userValRaw === '' ? NaN : Number(userValRaw);
    const correct = parseInt(currentBinary, 2);
    if (Number.isNaN(userVal)) {
      if (feedbackEl) feedbackEl.textContent = 'Please type a number.';
      return;
    }
    if (userVal === correct) {
      score++;
      if (feedbackEl) feedbackEl.textContent = '✔ Correct!';
    } else {
      if (feedbackEl) feedbackEl.textContent = '✘ Wrong! Correct: ' + correct;
    }
    if (scoreEl) scoreEl.textContent = score;
    console.log('Checked answer. user:', userVal, 'correct:', correct, 'score:', score);
  }
  window.generateBinary = generateBinary;
  window.checkAnswer = checkAnswer;
  try {
    generateBinary();
  } catch (err) {
    console.error('Error while generating binary on load:', err);
    if (feedbackEl) feedbackEl.textContent = 'Error generating number — see console.';
  }
});
</script>
</body>
</html>
